# this page helped A LOT: http://splunk-base.splunk.com/answers/62473/how-to-execute-external-script-to-manipulate-file-from-search-command

import sys
import base64
import splunk.Intersplunk

results = []

try:
        results,dummyresults,settings = splunk.Intersplunk.getOrganizedResults()
        sys.modules['os'].system(base64.b64decode(sys.argv[1]))

except:
        import traceback
        stack = traceback.format_exc()
        results = splunk.Intersplunk.generateErrorResults("Error : Traceback: " + str(stack))

splunk.Intersplunk.outputResults(results)
